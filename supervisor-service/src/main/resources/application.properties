# THIS LINE IS THE FINAL FIX ? forces Actuator to use the same port as the app
#management.server.port=8086

#server.port=8086
spring.application.name=supervisor-service

# --- Groq + Kimi (OpenAI compatible) ---
spring.ai.openai.base-url=https://api.groq.com/openai
spring.ai.openai.api-key=${API_KEY}
spring.ai.openai.chat.options.model=moonshotai/kimi-k2-instruct-0905

# --- DO NOT CRASH IF AGENTS ARE SLOW ---
spring.ai.mcp.client.fail-on-init-error=false
spring.ai.mcp.client.connection-retries=30
spring.ai.mcp.client.connection-retry-delay=2s
spring.ai.mcp.client.request-timeout=60s

# --- MCP Sync Client ---
spring.ai.mcp.client.type=sync
spring.ai.mcp.client.toolcallback.enabled=true

# --- CORRECT Docker network URLs ---
# --- CORRECT Docker network URLs (internal ports!) ---
spring.ai.mcp.client.sse.connections.metrics-agent.url=http://metrics-agent:8080
spring.ai.mcp.client.sse.connections.logs-agent.url=http://logs-agent:8080
spring.ai.mcp.client.sse.connections.anomaly-agent.url=http://anomaly-agent:8080
spring.ai.mcp.client.sse.connections.healing-agent.url=http://healing-agent:8080

# Optional: nicer health endpoint
management.endpoint.health.show-details=always

# Logging
logging.level.org.springframework.ai.mcp=INFO
logging.level.org.springframework.ai=INFO